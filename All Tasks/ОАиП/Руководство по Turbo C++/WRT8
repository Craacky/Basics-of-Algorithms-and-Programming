                           ГЛАВА 8

                       STRING РЕДАКТОР

     String редактор  позволяет  создавать   и   редактировать
ресурсы строки. Ресурсами строки являются строки, используемые
программой для любого текста, выводимого на экран, включая:
     - сообщение об ошибках
     - сообщения  о  статусе  или  другие  основные  сообщения
системы
     - текст заголовка в окне
     Ресурсы строк загружаются, когда необходимо, из выполняе-
мого файла. Чем больше строк Вы определили в качестве ресурса,
тем легче  будет  переводить на другой язык выводимый на экран
текст или подготавливать текст для различных использований.

                      Определение строк

     String редактор сохраняет строки в таблице строк  следую-
щим образом:
     - Первый столбец в таблице показывает идентификатор стро-
ки, целое число.
     - Второй столбец показывает саму строку.
     - Если открывается файл заголовков, то третий столбец по-
казывает символьное имя идентификатора.
     Максимальный размер таблицы строк, допускаемый в Windows,
равен 64К.  Вы можете определять только одну таблицу строк для
выполняемого файла.

                   Индикаторы поля и строки

     String редактор использует индикатор поля, чтобы показать
какое поле в таблице является активным,  а  индикатор  строки,
чтобы показать какая строка содержит активное поле.  Индикато-
ром поля является прямоугольная рамка, окружающая активное по-
ле, а  индикатор  строки - это стрелочка в левом поле таблицы.
                  Рисунок 8.1 Таблица строк
  ╔═[■]═════════════════════════════════════════════[°][∙]═╗
  ║                String:(untitled)(unnamed)              ║
  ║────────────────────────────────────────────────────────║
  ║ File  Edit  Header  Options  Help                      ║
  ║────────────────────────────────────────────────────────║
  ║  Value             String Text                         ║
  ║─┬────────────┬──────────────────────────────────────── ║
  ║ │0           │ Assignment out of range                 ║
  ║ │1           │ Cannot be changed                       ║
  ║ │            │┌──────────────────────────────────────┐ ║
  ║>│2           ││Divide by zero                        │ ║
  ║ │            │└──────────────────────────────────────┘ ║
  ║ │3           │ Error writing file to disk              ║
  ║ │4           │ Invalid instruction                     ║
  ║ │5           │                                         ║
  ║ │6           │                                         ║
  ║ │7           │                                         ║
  ║ │8           │                                         ║
  ╚═══════════════════════════════════════════════════════─┘
     Примечание. Индикаторы показывают, что активным полем яв-
ляется String Text поле для Value 2.

                        Таблица строк

     Первым столбцом  таблицы  строк является Value поле.  Это
поле содержит идентификационный номер для строки в String Text
столбце (столбец  2).  Для загрузки строки текста в Вашу прог-
рамму, сделайте ссылку на этот номер в исходном  тексте  прог-
раммы. Альтернативно,  Вы  можете  определить  обозначение для
строки, как описано далее в этой главе.
     String редактор  автоматически присваивает значения стро-
кам в строковой таблице;  значениями являются последовательные
целые числа, начиная с 0. Строки не могут добавляться или уда-
ляться из таблицы,  также как  не  может  изменяться  значение
строки.
     Идентификационные значения текста строки могут быть таки-
ми же как идентификаторы, используемые в других ресурсах,  на-
пример, для элементов управления в диалоговом окне.  Это  про-
исходит потому,  что  Windows интерпретирует идентификационные
значения в контексте ресурса, используемого в программе в дан-
ный момент времени.

                       String Text поле

     Второй столбец, String Text поле, показывает саму строку.
Вводите строки без знаков качек;  если строка заключена в  ка-
вычки, то кавычки обрабатываются как часть строки. Текст стро-
ки должен быть длиной не более 255 символов.
     Когда текст  строки  для  любого  значения  загружается в
программу, строка выводится на экран в пределах  одной  линии.
ДЛя добавления символов "возврат каретки" в строку используйте
код \012 для  указания  позиции  возврата  каретки.  Например,
текст строки
     Line one\012Line two
выводится на экран в программе как:
     Line one
     Line two

                         Symbol поле

     Если открывается файл заголовков,  то третий столбец, на-
зываемый Symbol, показывает обозначение, чей идентификационный
номер в  файле  заголовков соответствует значению для текущего
текста строки. Для загрузки текстовой строки в Вашу программу,
Вы можете сослаться на это обозначение в исходном тексте прог-
раммы. Это появляется ,  если открывается файл заголовков; ин-
формация о файлах заголовков приведена ниже.

                   Размеры и значения строк

     Windows загружает строковые ресурсы в 16-ти строчные сег-
менты. Например, когда Вы запрашиваете строку 14, Windows заг-
ружает строки от 0 до 15. Для того, чтобы уменьшить количество
загрузок, которые должна  выполнить  Windows,  мы  рекомендуем
группировать строки,  являющиеся общими для определенной функ-
ции, в 16-ти строчные сегменты.  Это позволяет Windows  загру-
жать связанные  строки вместе,  а также отбрасывать их вместе,
когда программа в них больше не нуждается.
     За исключением  функционального  группирования  связанных
строк в 16-ти строчные сегменты,  другие факторы не играют ни-
какой роли для значения,  выбираемого Вами для определения но-
вого текста строки.
     Когда строки  сохраняются,  то только те строки,  которые
содержат данные,  записываются в файл ресурсов.  Однако6 когда
файл ресурсов  последовательно открывается в Srting редакторе,
пустые строки вводятся снова так,  чтобы Вы могли добавить до-
полнительные строки в таблицу.
     Когда Вы сохраняете новую строковую таблицу,  String  ре-
дактор открывает Resource Attributes диалоговое окно. Там, где
возможно, сделайте таблицу подвижной и удаляемой.  Более  под-
робную информацию  о Resource Attributes диалоговом окне смот-
рите в главе 10, раздел "File меню".

                    Управление редактором

     Описание большинства ключевых слов,необходимых для  пере-
мещения по String редактору,приведено ниже в главе 10.В допол-
нении к этому,Вы можете пролистать по страницам экраны в стро-
ковой таблице   без   перескакивания   через  экраны,благодаря
использованию PgUp и  PgDn.Чтобы  пролистать  экраны,пропустив
экраны,которые не    определены   текстом   строки,используйте
Ctrl-PgUp и Ctrl-PgDn.Например,если текущий  экран  показывает
строки от 0 до 8 и строка 999 является следующей строкой,кото-
рая определена текстом строки,то нажмите Ctrl-PgDn для перехо-
да на  строку  999.Для  того,чтобы  перейти непосредственно на
строку,используйте Ctrl-L.Например,для  прямого  перехода   на
строку 999,нажмите Ctrl-L,затем наберите 999 в поле результата
записи диалогового окна.
     Так как  Вы  не можете добавить строки в строковую табли-
цу,как Enter,так и Ctrl-Enter продвигают курсор  на  следующую
строку в  таблице.Невозможно с помощью клавиши вставить пустую
строку  или разделить текст строки на части.

                    Редактирование текста

     Вы можете редактировать String Text поля,а когда открыва-
ется файл  заголовков,то  и Symbol поле.Если Вы выбираете поле
из любого из этих столбцов,то выбирается весь текст в поле.
     - Чтобы  заменить текст,начинайте набор нового текста или
нажмите Del.
     - Чтобы сохранить текст,переместите курсор в поле,исполь-
зуя "мышку",клавиши-стрелки или клавиши Home или End.Затем  Вы
можете отредактировать некоторую часть текста.

                       Файлы заголовков

     Для того,чтобы открыть файл заголовков так,чтобы Вы могли
просмотреть или отредактировать обозначения в  то  время,когда
определяются ресурсы  строки,выберите File\Open\Header из меню
String редактора.Это добавит Symbol столбец в строковую табли-
цу.
     Открытие файла заголовков открывает специальный  редактор
файлов заголовков.Вы  можете редактировать обозначения,исполь-
зуя редактор  файла  заголовков  или  редактировать   их   не-
посредственно из  строковой таблицы.Более подробную информацию
о файлах заголовков и инструкциях по редактированию  обозначе-
ний смотрите в главе 9.


















