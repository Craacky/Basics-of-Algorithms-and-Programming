                           ГЛАВА 9

                       HEADER РЕДАКТОР

     Header редактор позволяет Вам создавать  и  редактировать
символьные  константы,называемые  обозначениями,которые  могут
заменять  идентификационные  номера,используемые  Windows  для
идентификации  ресурсов.После того,как обозначения определены,
Вы можете загрузить ресурсы из  исходного  текста  посредством
ссылки на  их определенные обозначения,а не их цифровые значе-
ния.Header редактор позволяет определить обозначения в то вре-
мя,когда Вы  создаете  или  редактируете ресурсы для замещения
которых они предназначены.

                         Header файлы

     Символьные константы,сохраняемые Header редактором,накап-
ливаются в  файлах заголовков,которые используются для включе-
ния символьных констант в исходный текст.Так как  файлы  заго-
ловков включают  константы  в исходный текст,они также называ-
ются include файлами.
     Обозначения из  файла  заголовков  становятся глобальными
константами,когда они компилируются.Поэтому,каждое обозначение
должно быть уникальным в пределах данной программы.
     Ниже представлены  часть  типичного  файла  заголовков  с
константами C-стиля.
     # define CW_FILE_NEW 101
     # define CW_FILE_OPEN 102
     # define CW_FILE_SAVE 103
     Файл использует #define операторы для определения обозна-
чений в качестве заместителей их соответствующих значений.Нап-
ример,CW_FILE_NEW определяется  как  обозначение  для значения
101.
     Вы не  должны использовать Header редактор для того,чтобы
создавать  или  редактировать  файлы  заголовков.Они  являются
текстовыми файлами,которые могут быть отредактированы отдельно
с помощью любого текстового редактора.При редактировании файла
заголовков  с помощью редактора текста,Вы можете включить ком-
ментарии в файл.Например,Вы  можете  использовать  комментарии
C-стиля,начиная с /* и кончая */ в файле.Когда файл заголовков
компилируется,эти комментарии игнорируются.
     Файлы заголовков включаются в файл (.RC)описания ресурсов
программы.В .RC файле файл  заголовков  должен  предшествовать
ресурсам,чьи обозначения  он  определяет.Это  необходимо из-за
того,что на  ресурсы  ссылаются  их   символьные   константы,а
константы должны  определяться в исходном тексте перед тем как
они будут использоваться.

                   Инициирование редактора

     Так как Header редактор позволяет определять  обозначения
в то  время,когда Вы создаете или редактируете ресурсы,которые
они замещают,никогда не инициируйте Header редактор сам по се-
бе.Лучше начать   редактировать  ресурс,а  затем  инициировать
Header редактор из редактора ресурса.Например,для  определения
обозначений ресурсов  строк,сначала  инициируйте String редак-
тор,затем из String редактора инициируйте Header редактор.
     Каждый из Accelerator,Dialog Box,Menu и String редакторов
имеют опции в их File меню для создания нового файла  заголов-
ков или открытия существующего файла заголовков.После того,как
Вы выберите одну из этих опций,Header  редактор  автоматически
инициируется и  открывается  файл  заголовков.Только один файл
заголовков может открываться внутри каждого редактора  ресурса
в данный момент времени.
     Примечание.Header редактор является дочерним окном редак-
тора,используемого для его инициирования.Таким образом,если Вы
минимизируете или закрываете соответствующий редактор до появ-
ления пиктограммы,то  Header редактор также минимизируется или
закрывается.

               Создание новых файлов заголовков

     Для создания нового файла заголовков выберите  опцию  New
Header из  File  меню в Accelerator,Dialog Box,Menu или String
редакторах.Это откроет пустой  файл  заголовков  так,чтобы  Вы
могли определить новые обозначения для Вашей программы.
     Типичным образом,Вы должны создать только один новый файл
заголовков для каждой разрабатываемой Вами программы.Это дела-
ется так,потому что легче обеспечить уникальные обозначения  в
пределах одного  файла заголовков,чем обеспечивать их уникаль-
ность в пределах множества файлов заголовков.
     Однако,определение количества файлов заголовков,создавае-
мых в программе,является  конструкторским  решением.Вы  можете
создать столько  файлов  заголовков,сколько  необходимо.Напри-
мер,Вы можете   создать   отдельный   файл   заголовков    для
Accelerator,Dialog Box,Menu   и   String   типов  ресурсов.Для
обеспечения уникальности обозначений в каждом файле заголовков
Вы можете  присвоить  им первую букву типа ресурса.Например,Вы
можете присвоить A_ каждому символу акселератора.

           Открытие существующих файлов заголовков

     Для открытия существующего файла заголовков выберите Open
Header из  File  меню в Accelerator,Dialog Box,Menu или String
редакторах.Если Вам необходимы  дополнительные  инструкции  по
открытию файла,то смотрите инструкции для File меню в главе 10.


                   Использование редактора

     Header редактор позволяет Вам редактировать  или  удалять
обозначения,перемещать обозначения в файле заголовков и сохра-
нять произведенные изменения в файле заголовков.

                   Идентификационные номера

     До работы с файлом заголовков  определите,желаете  ли  Вы
чтобы ресурсные  идентификационные номера(значения) выводились
на экран в десятичном или шестнадцатеричном  формате.Зависимые
кнопки в  верхнем  правом  углу Header редактора позволяют Вам
выбрать соответствующий формат.Десятичный формат является  оп-
ределяемым по умолчанию.
     Определенное обозначение становится глобальной константой
в исходном  тексте  программы.Таким  образом,если Вы включаете
несколько файлов заголовков в Вашу программу,то обозначения  в
каждом файле должны быть уникальными.Ни одно из обозначений не
может определяться в более чем одном файле,если оно только  не
связывается с одним и тем же значением.Например,если обозначе-
ние CW_FILE_NEW связывается со значением 101 в одном файле за-
головков,то ни  один из файлов заголовков,созданных для той же
самой программы не может содержать обозначения CW_FILE_NEW  за
исключением того случая,когда оно связывается со значением 101.
     Значения не являются уникальными в пределах  файла  заго-
ловков,потому что  различные ресурсы в программе могут исполь-
зовать одни и те же  значения  идентификатора.Например,элемент
меню и   кнопка   в   диалоговом  окне  могут  иметь  значение
101.Windows не спутает эти два значения,потому что оно интерп-
ретирует значения в контексте используемого ресурса.
     Header редактор разыскивает значения с верхней части фай-
ла заголовков к нижней части и выводит на экран первое обозна-
чение,которое он находит для данного значения.Это означает,что
порядок обозначений  в файле заголовков может определить какое
обозначение выводится на экран для значения в  соответствующем
редакторе.Например,если Вы  определили обозначение CW_FILE_NEW
для элемента меню 101 в Menu редакторе,а SAV_BUTTON  определя-
ется для  значения  выше  101 в файле заголовков,то SAV_BUTTON
выводится в Menu редакторе,как обозначения для  элемента  меню
101.Для выведения  на экран CW_FILE_NEW в качестве обозначения
Вы должны переместить его выше SAV_BUTTON в файле заголовков.

                  Редактирование обозначения

     Вы можете  создать  или  отредактировать  обозначение   в
Header редакторе  или в соответствующем редакторе ресурса.Каж-
дый подраздел этого раздела дает инструкции для различных  ре-
дакторов.

                      В Header редакторе

     Для редактирования обозначения в Header редакторе:
     1.Сделайте активным Symbol поле и наберите обозначение  в
этом поле.В случае существующего обозначения Вы можете выбрать
обозначение из окна списков и оно автоматически скопируется  в
Symbol поле.После  того,как  Вы наберете обозначение ,сделайте
активным Value поле и наберите значение ресурса.
     - Symbol.Первый  символ  обозначения должен быть алфавит-
ным.Все дополнительные символы могут  быть  алфавитно-цифровы-
ми.Максимальная длина  обозначения  зависит от языка исходного
текста.Обозначение должно быть уникальным.Если Вы вводите  имя
существующего обозначения,то значение,которое Вы определяете в
Value поле,заменяет значение,определенное ранее для  обозначе-
ния-даже если  существующее обозначение невидимо в текущий мо-
мент в окне списка.
     - Values.Введите  значение для ресурса,который должен за-
менить обозначение.Например,если Вы определили обозначение для
элемента меню с идентификатором 101,то наберите 101 как значе-
ние,связанное с обозначением.Значение должно быть цифровым.Для
введения длинного номера добавьте к числу суффикс L.
     Вы не можете ввести макросы или выражения C-стиля в Value
поле.Header редактор игнорирует любые строки,которые он не по-
нимает.
     2.Нажмите с  помощью  мышки  на To Top,Put или To End для
того,чтобы расположить обозначение в файле заголовков.
     -To Top  помещает обозначение в верхней части файла заго-
ловков.Это обеспечивает вывод на  экран  этого  обозначения  в
соответствующем редакторе ресурса,даже если другое обозначение
в файле заголовков определяется для того же самого значения.
     - Put  помещает  обозначение в строку,выбранную в текущий
момент в окне списка.Вы можете выбрать Put,если Вы только  что
отредактировали обозначение  в  таблице  и не желаете изменять
его положение  в  файле  заголовков.Или  Вы   можете   выбрать
Put,чтобы поместить новое обозначение в выбранную строку.
     - To End помещает обозначение в нижней части файла  заго-
ловков.Это обеспечивает то,что обозначение не будет выводиться
на экран  в  соответствующем  редакторе  ресурсов,если  другое
обозначение определяется для того же самого значения.Вы можете
делать это,чтобы проверить ,является ли это значение  уникаль-
ным в  файле заголовков или для предохранения нового обозначе-
ния от воздействия Вашей работы  в  соответствующем  редакторе
ресурсов.
     Например,если Вы  только   что   определили   обозначение
CW_FILE_NEW для элемента меню 101 в Menu редакторе,то Вы може-
те поместить это обозначение внизу  файла  заголовков,а  затем
посмотреть является  ли  CW_FILE_NEW обозначением,выводимым на
экран для элемента меню 101 в Menu редакторе.Если  это  так,то
Вы знаете,что  значение  101 является уникальным в файле заго-
ловков.Если это не так,то Вы знаете ,что существует по меньшей
мере еще одно обозначение,определенное для значения 101 в дан-
ном файле.
     Или Вы можете работать со String редактором, когда решае-
те определить обозначение CW_FILE_NEW для элемента  меню  101.
Если Вы  также  определили обозначение для строки со значением
101, то Вам нужно убедиться,  что обозначение для  строки  101
находится выше обозначение для элемента меню 101 в файле заго-
ловков. В противном случае,  String редактор будет выводить на
экран неправильное  обозначение  для ресурса строки,  имеющего
значение 101.

           В Accelerator, String и Menu редакторах

     Для редактирования обозначения в  Accelerator,  String  и
Menu редакторах:
     1. Выберите Symbol поле из соответствующей строки в  таб-
лице, а затем добавьте или отредактируйте обозначение.
     2. Нажмите Enter ,  или используйте  мышку,  или  клавиши
клавиатуры для перемещения индикатора поля на другое поле. Это
открывает Undefined Symbol диалоговое окно.
     3. Наберите значение, которое Вы желаете заменить обозна-
чением. Это наиболее  вероятно  будет  значение  для  текущего
Symbol поля, однако диалоговое окно позволяет изменить Ваш об-
раз мышления и связать обозначение с другим значением.
     4. Нажмите с помощью мышки на Put Top или Put End,  чтобы
расположить обозначение в файле заголовков.  Put Top и Put End
эквивалентны To Top и To End в файле заголовков.
     Описание Symbol и Value полей и To Top и To End кнопок, а
также инструкции  для  редактирования обозначений в Heаdеr ре-
дакторе приведены выше в этой главе.

                    В Dialog Box редакторе

     Для редактирования обозначения в Dialog Box редакторе:
     1. Откройте  Attributes  окно элемента управления двойным
нажатием с  помощью  мышки  на  этот  элемент  управления.   В
Attributes окне Item ID поле выводит на экран значение элемен-
та управления.  Если существует обозначение,  определенное для
такого значения  в файле заголовков,  то вместо этого значения
на экран выводится обозначение.
     2. Наберите  новое  обозначение  в Item ID поле,  а затем
нажмите с помощью мышки на клавишу OK.  Это откроет  Undefined
Symbol диалоговое окно.
     Примечание. Вы не можете  вводить  алфавитные  символы  в
Item ID поле, если не открывается файл заголовков.
     3. Наберите значение, которое Вы желаете заменить обозна-
чением, затем  нажмите  с  помощью  мышки Put Top или Put End,
чтобы расположить обозначение в файле заголовков.  Put  Top  и
Put End  являются  эквивалентами To Top и To End в файле заго-
ловков.
     Описание обозначений и значений,  To Top и To End кнопок,
а также инструкции для редактирования обозначения в Header ре-
дакторе приведены выше в этой главе.

                     Удаление обозначения

     Для того,  чтобы удалить обозначение, выберите его в окне
списка Header редакторе,  а затем нажмите с помощью  мышки  на
Delete кнопку.  Это  действие  удаляет как обозначение,  так и
связанное с ним значение из  файла  заголовков.Убедитесь,  что
выбрано правильное  обозначение.  Header редактор не открывает
диалоговое окно для запроса о подтверждении удаления обозначе-
ния.

                   Перемещение обозначения

     Для перемещения обозначения в файле заголовков,  выберите
его в окне списка Header редактора,  а затем нажмите с помощью
мышки на To Top, Put или To End. Более подробную информацию об
этих кнопках смотрите выше в этой главе.

                 Сохранение файла заголовков

     Для того,  чтобы сохранить файл заголовков, нажмите с по-
мощью мышки на Save или Save As:
     - Save сохраняет файл под его первоначальным именем.
     - Save As сохраняет файл под новым именем.
     Для обеспечения соответствия  файла  заголовков  с  Вашей
программой, присвойте такое же имя файлу заголовков,  какое Вы
присвоили файлу (.RES)  ресурсов  программы  или  выполняемому
(.EXE) файлу.
     Header файлы пишутся в формате,  совместимом с C,  C++  и
Microsoft Resource  Compiler.  Header  редактор  автоматически
прибавляет расширение файла .H к этим файлам.
     Если Вам  необходимы более подробные инструкции по сохра-
нению файлов, то смотрите инструкции для File меню в главе 10.




